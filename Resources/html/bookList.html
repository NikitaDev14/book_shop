<div header></div>
<div class="row" ng-controller="bookController as bkCtrl">
    <div class="col-sm-3">
        <h4>Filter by authors</h4>
        <select class="form-control" data-ng-attr-size="{{bkCtrl.authors.length+1}}" ng-model="filterAuthor" ng-options="auth.Name for auth in bkCtrl.authors">
            <option value="">---</option>
        </select>
        <h4>Filter by genres</h4>
        <select class="form-control" data-ng-attr-size="{{bkCtrl.genres.length+1}}" ng-model="filterGenre" ng-options="genr.Name for genr in bkCtrl.genres">
            <option value="">---</option>
        </select>
    </div>
    <div class="col-sm-9">
        <div class="col-md-4" ng-repeat="book in bkCtrl.books.filter(filterAuthor.Name, filterGenre.Name)">
            <img class="img-responsive img-thumbnail" ng-src="/book_shop/Resources/img/{{book.Image}}"/>
            <p ng-bind="book.Name"></p>
            <p>Price: {{book.Price | currency}}</p>
            <div class="btn-group" role="group">
                <div class="btn-group" role="group">
                    <a class="btn btn-primary" ng-href="#/book/{{book.idBook}}" role="button">Details</a>
                </div>
                <div class="btn-group" role="group" ng-controller="cartController as cartCtrl">
                    <button class="btn btn-success" ng-click="cartCtrl.cart.add(book)" ng-class="{'disabled': !bkCtrl.isValidUser}">Add to cart</button>
                </div>
            </div>
        </div>
    </div>
</div>